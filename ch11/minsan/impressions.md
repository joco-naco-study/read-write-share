# 테스트 케이스를 떠올리려는 습관은 코드의 잠재적인 문제를 발견하는 좋은 방법이다

책에서 테스트를 위해 `코드가 보일 행동을 생각해내는 연습`이 중요하다고 말한다.  
이 과정에서 코드의 잠재적인 문제를 발견할 수 있기 때문이다.

- 이러한 부분으로 볼 때, 테스트 작성은 코드의 정확성을 점검하는 데도 유용한 것 같다.

# 테스트에 불필요한 코드는 삭제를 검토할 수 있다

삭제되어도 테스트에 영향을 주지 않는 코드가 존재한다면, 해당 코드의 존재 이유에 대해서 다시 한번 검토해볼 여지가 있다.

테스트 대상 코드는 시나리오에 꼭 필요한 코드만 가지고 있어야 하기 때문이다.

- 이처럼 테스트 코드를 작성하는 과정을 통해서 `코드의 존재 이유`를 점검해볼 수 있다.

# 좋은 단위 테스트는 중요한 행동을 테스트 해야 한다

중요하지 않은 행동을 테스트하려는 시도는 private 함수를 public 함수로 전환하는 실수로 이어질 수 있다.

- 즉, 좋은 단위 테스트는 구현 세부 사항에 독립적인 테스트를 진행할 수 있다.

# 퍼블릭 API로 테스트하기 어렵다는 것은 추상화 분리의 신호일 수 있다

퍼블릭 API를 통해 모든 동작을 테스트하는 것이 까다로운 경우, **코드의 추상화 계층이 너무 크다**는 것을 의미한다.

따라서 이 경우에 **코드를 더 작은 단위로 분할하는 것**이 좋다.

- _ex) 별도의 클래스로 분리_

# 테스트 결과가 설정 값에 영향을 받는 경우, 테스트 케이스 내부에서 설정하는 것이 좋다

인스턴스 생성 등, 테스트 설정에 필요한 코드의 중복을 줄이기 위해 `BeforeEach`를 사용하는 경우가 많다.

이전에는 이에 대한 위험성을 크게 생각하지 않았는데, 이번 장을 통해서 설정 공유를 사용할 때 유의해야할 점들을 생각해볼 수 있었다.

> **설정 값이 테스트 결과에 직접적으로 영향을 주는 경우**에는 설정 값을 공유하는 것보다 **테스트 케이스 내부에서 직접 설정하는 것**이 좋다.
>
> - 이때, 인스턴스 생성 `헬퍼 함수`를 활용하면 코드 중복도 어느정도 줄일 수 있다.

# 함수 매개변수는 꼭 필요한 것만 갖는 것이 이상적이다

만약 코드의 동작에 별로 관련이 없는 설정을 해야한다면, 함수 혹은 생성자 매개변수의 목적이 명확하지 않다는 신호일 수 있다.

`Order` 인스턴스를 생성하는데 메타데이터가 필요하다고 가정하자.  
이때, `PostageManger.getPostageLabel(Order order)` 함수 내부에서는 메타데이터를 사용하지 않는다.

- 이 함수의 매개변수를 `Order`가 아닌 **`Address` 인스턴스와 `주문 항목 목록`을 사용**하여 **불필요한 항목을 제외**시킬 수 있다.

# 테스트가 어떻게 실패할지에 대해 생각하는 것도 중요하다

적절한 어서션을 사용하지 않으면 실패의 이유를 명확히 드러내지 않기 때문에, 적절한 어서션을 사용했는지 점검하는 것이 필요하다.

# 정적 팩터리 함수: 클래스 사용자의 의존성에 대한 걱정을 덜어줄 수 있다

# 테스트 용이성은 모듈화와 관련이 있다

서로 다른 코드가 느슨하게 결합하고 재설정이 가능하면, 테스트는 훨씬 더 쉬워지는 경향을 띤다.
