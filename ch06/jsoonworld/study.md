
# Ch06: 예측 가능한 코드를 작성하라

- 코드가 어떻게 예측을 벗어나 작동할 수 있는지
- 소프트웨어에서 예측을 벗어나는 코드가 어떻게 버그로 이어질 수 있는지
- 코드가 예측을 벗어나지 않도록 보장하는 방법

# 6.1 매직값을 반환하지 말아야 한다.

매직값 `magic value`은 함수의 정상적인 반환 유형에 적합하지만 특별한 의미를 가지고 있다. 매직값의 일반적인 예는 값이 없거나 오류가 발생했음을 나타내기 위해 `-1`을 반환하는 것이다.

매직값은 함수의 정상적인 반환 유형에 들어맞기 때문에 이 값이 갖는 특별한 의미를 인지하지 못하고, 이에 대해 적극적으로 경계하지 않으면 정상적인 반환값으로 오인하기 쉽다. 

- 매직값은 버그를 유발할 수 있다.
- 해결책: 널, 옵셔널 또는 오류를 반환하라.
- 6.1.3 때때로 매직값이 우연히 발생할 수 있다.

# 6.2 널 객체 패턴을 적절히 사용하라

- 빈 컬렉션을 반환하면 코드가 개선될 수 있다.
- 빈 문자열을 반환하는 것도 때로는 문제가 될 수 있다.
- 더 복잡한 널 객체는 예측을 벗어날 수 있다.
- 널 객체 구현은 예상을 벗어나는 동작을 유발할 수 있다.

# 6.3 예상치 못한 부수 효과를 피하라

- 분명하고 의도적인 부수 효과는 괜찮다.
- 예기치 않은 부수 효과는 문제가 될 수 있다.
- 해결책: 부수 효과를 피하거나 그 사실을 분명하게 하라.

# 6.4 입력 매개변수를 수정하는 것에 주의하라.

- 입력 매개변수를 수정하면 버그를 초래할 수 있다.
- 해결책: 변경하기 전에 복사하라

# 6.5 오해를 일으키는 함수는 작성하지 말라.

- 중요한 입력이 누락되었을 때 아무것도 하지 않으면 놀랄 수 있다.
- 해결책: 중요한 입력은 필수 항목으로 만들라

# 6.6 미래를 대비한 열거형 처리

- 미래에 추가될 수 있는 열것값을 암묵적으로 처리하는 것은 문제가 될 수 있다.
- 해결책: 모든 경우를 처리하는 스위치 문을 사용하라.
- 기본 케이스를 주의하라.
- 주의 사항: 다른 프로젝트의 열거형에 의존

# 6.7 이 모든 것을 테스트로 해결할 수는 없는가?

# 요약

- 다른 개발자가 작성하는 코드는 종종 우리가 작성하는 코드에 의존한다.
	- 다른 개발자가 우리 코드의 기능을 잘못 해석하거나 처리해야 하는 특수한 경우를 발견하지 못하면, 우리가 작성한 코드에 기반한 코드에서 버그가 발생할 가능성이 크다.
	- 코드를 호출하는 쪽에서 예상한대로 동작하기 위한 좋은 방법 중 하나는 중요한 세부 사항이 코드 계약의 명백한 부분에 포함되도록 하는 것이다.
- 우리가 사용하는 코드에 대해 허술하게 가정을 하면 예상을 벗어나는 또 다른 결과를 볼 수 있다.
	- 예를 들어 열거형에 추가되는 새 값을 예상하지 못한 경우다.
	- 의존해서 사용 중인 코드가 가정을 벗어날 경우, 코드 컴파일을 중지하거나 테스트가 실패하도록 하는 것이 중요하다.
- 테스트만으로는 예측을 벗어나는 코드의 문제를 해결할 수 없다. 다른 개발자가 코드를 잘못 해석하면 테스트해야 할 시나리오도 잘못 이해할 수 있다.




