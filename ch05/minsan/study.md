# Chapter 05: 가독성 높은 코드를 작성하라

## 5.1 서술형 명칭 사용

이름을 붙이는 것은 스스로 설명되는 방식으로 언급합으로써 읽기 쉬운 코드 작성을 위한 기회이기도 하다.

### 5.1.1 서술적이지 않은 이름은 코드를 읽기 어렵게 만든다

### 5.1.2 주석문으로 서술적인 이름을 대체할 수 없다

서술적인 이름을 붙이는 대신 주석문을 사용하면 안 된다.

### 5.1.3 해결책: 서술적인 이름 짓기

## 5.2 주석문의 적절한 사용

코드 내에서 주석문이나 문서화는 다음의 다양한 목적을 수행할 수 있다.

- 코드가 **무엇**을 하는지 설명
- 코득 **왜** 그 일을 하는지 설명
- 사용 지침 등 기타 정보 제공

하위 수준에서 코드 한 줄 한 줄 마다 코드가 무엇을 하는지 설명하는 주석문은 가독성을 높이기 위한 효과적인 방법이 될 수 없다.

반면에 **코드가 왜 그 일을 하는지**에 대한 `이유`나 `배경`을 설명하는 주석문은 유용할 때가 많다. _(코드만으로는 이를 명확히 할 수 없기 때문)_

### 5.2.1 중복된 주석문은 유해할 수 있다.

코드로 충분히 설명되고 있다면, 주석문은 불필요하므로 주석문을 지우도록 한다.

### 5.2.2 주석문으로 가독성 높은 코드를 대체할 수 없다.

때로는 주석문이 유용한 것처럼 보이지만, 진짜 문제는 `코드가 읽기 쉽도록 작성되지 않았을지도 모른다`는 점이다.

코드 자체로 설명이 되도록 코드를 작성하면 굳이 주석문을 사용할 필요가 없다.

### 5.2.3 주석문은 코드의 이유를 설명하는 데 유용하다.

코드가 `왜 그 일을 수행하는지`는 코드 자체로는 설명하기 어렵다.

특정 코드가 존재하는 `이유`나 어떤 일을 수행하는 `목적`은 코드를 파악하고자 하는 다른 개발자가 알 수 없는 `배경 상황`이나 `지식`과 관련 있을 수 있다.

> 이러한 `배경지식`이나 `지식`이 코드를 이해하거나 안전하게 수정하기 위해 중요한 경우, **주석문은 유용하게 사용**될 수 있다.

### 5.2.4 주석문은 유용한 상위 수준의 요약 정보를 제공할 수 있다.

주석과 문서화는 **코드만으로는 전달할 수 없는 세부사항**을 설명하거나 **코드가 큰 단위에서 하는 일**을 요약하는 데 유용하다.

> 단점으로는 이러한 주석문과 문서도 유지보수가 필요하고, 코드에 맞게 업데이트 되어야 한다는 점이다.

## 5.3 코드 줄 수를 고정하지 말라

매우 이해하기 어려운 코드 한 줄은 같은 일을 하는 이해하기 쉬운 코드 10줄에 비해 코드 품질을 쉽게 낮출 수 있다.

### 5.3.1 간결하지만 이해하기 어려운 코드는 피하라

### 5.3.2 해결책: 더 많은 줄이 필요하더라도 가독성 높은 코드를 작성하라

더 많은 코드를 작성해서 코드가 더 명백해진다면 그렇게 하는 것이 훨씬 좋다.

코드가 더 길어지더라도, 잘 명명된 `헬퍼 함수`와 `상수`를 정의해서 코드의 가독성을 높여라.

## 5.4 일관된 코딩 스타일을 고수하라

### 5.4.1 일관적이지 않은 코딩 스타일은 혼동을 일으킬 수 있다.

### 5.4.2 해결책: 스타일 가이드를 채택하고 따르라

대부분의 조직과 팀들은 개발자들이 따라야 할 코딩 스타일 가이드를 이미 가지고 있다.  
따라서 팀이 요구하는 스타일 가이드를 읽고 ㅍ악한 후에 그대로 따르면 된다.

## 5.5 깊이 중첩된 코드를 피하라

### 5.5.1 깊이 중첩된 코드는 읽기 어려울 수 있다.

중첩이 깊어지면 가독성이 떨어지기 때문에, 중첩을 최소화하도록 코드를 구성하는 것이 바람직하다.

### 5.5.2 해결책: 중첩을 최소화하기 위한 구조 변경

- 중첩된 모든 블록에 **반환문이 있을 때**
  - 중첩을 피하기 위해 논리를 재배치하는 것이 일반적으로 아주 쉬움
- 중첩된 블록에 **반환문이 없을 때**
  - `함수가 너무 많은 일을 하고 있다`는 신호

### 5.5.3 중첩은 너무 많은 일을 한 결과물이다.

### 5.5.4 해결책: 더 작은 함수로 분리

## 5.6 함수 호출도 가독성이 있어야 한다

함수의 이름이 잘 지어졌더라도, `함수의 인수`가 무엇을 위한 것이고 무슨 역할을 하는지 명확하지 않다면 함수 호출 자체가 이해되지 않을 수도 있다.

### 5.6.1 매개변수는 이해하기 어려울 수 있다

```java
sendMessage("hello", 1, true);
```

위 코드처럼 `1`과 `true`는 각각 무엇을 의미하는지 이해하기 어렵다.

### 5.6.2 해결책: 명명된 매개변수 사용 (참고만)

ex) 타입스크립트의 객체 구조 분해

### 5.6.3 해결책: 서술적 유형 사용

함수를 정의할 때 좀 더 서술적인 유형을 사용하는 것이 바람직하다.

`sendMessage`에서는 **우선순위**를 나타내기 위해 `정수`를, **재시도 허용 여부**를 나타내기 위해 `불리언 값`을 사용한다.

- 정수와 불리언은 상황에 따라 어떤 종류의 값이라도 의미할 수 있기 때문에, 그 자체로는 서술적이지 않다.

이때, `특정 유형`을 만들어 그 매개변수들이 나타내는 바를 설명하면 된다.

- 클래스
  - **메시지의 우선순위**를 클래스로 표현
- 열거형
  - **재시도 정책**은 불리언 대신 두 가지 옵션이 있는 열거형 사용

```java
class MessagePriority {
    MessagePriority(int priority) {
        // ...
    }
}

enum RetryPolicy {
    ALLOW_RETRY,
    DISALLOW_RETRY,
    ;

    // ...
}

void sendMessage(
    String message,
    MessagePriority priority,
    RetryPolicy retryPolicy
);
```

### 5.6.4 때로는 훌륭한 해결책이 없다

`setter` 함수를 추가하거나, `빌더 패턴`을 사용하는 것이 대안이 될 수 있다.

- 하지만, 두 방법 모두 값이 누락된 채 인스턴스가 만들어질 수 있기 때문에 **코드가 쉽게 오용될 수 있다**는 단점이 있다.

### 5.6.5 IDE에 의존하지 말 것

IDE에 따라서 매개변수의 이름을 표시하기도 하지만, 이것에 의존해서는 안 된다.

## 5.7 설명되지 않은 값을 사용하지 말라

하드 코드로 작성된 값이 필요한 경우가 많이 있는데, 몇 가지 일반적인 예는 다음과 같다.

- 한 수량을 다른 수량으로 변환할 때 사용하는 계수
- 작업이 실패할 경우 재시도의 최대 횟수와 같이 조정 가능한 파라미터 값
- 어떤 값이 채워질 수 있는 템플릿을 나타내는 문자열

### 5.7.1 설명되지 않은 값은 혼란스러울 수 있다

운동에너지 방정식을 사용하는 코드가 존재한다고 한다면, 방정식에 익숙하지 않은 사람은 이 방정식에 사용되는 `상수`가 무엇을 나타내는지 모를 것이다.

### 5.7.2 해결책: 잘 명명된 상수를 사용하라

### 5.7.3 해결책: 잘 명명된 함수를 사용하라

- 상수를 반환하는 `공급자 함수`
- 변환을 수행하는 `헬퍼 함수`
  - ex) `usTonsToKilograms()`

> 정의한 값이나 헬퍼 함수를 다른 개발자들이 재사용할 것인지 고려할만한 가치가 있다.  
> 👉🏻 그럴 가능성이 있다면, 현재 사용중인 클래스보다는 `별도의 유틸리티 클래스`에 두는 것이 좋다.

## 5.8 익명 함수를 적절하게 사용하라

간단하고 자명한 것에 익명 함수를 사용하면 코드 가독성을 높여주지만, 복잡하거나 자명하지 않은 것 혹은 재사용해야 하는 것에 사용하면 문제가 될 수 있다.

### 5.8.1 익명 함수는 간단한 로직에 좋다

> 재사용 가능성이 있는 로직은 익명 함수보다는 `명명 함수`를 작성하는 것이 더 나을 수 있다.

### 5.8.2 익명 함수는 가독성이 떨어질 수 있다

### 5.8.3 해결책: 대신 명명 함수를 사용하라

**간단하고 자명한 논리**는 `익명 함수`를 써도 괜찮지만, **복잡한 논리**는 `명명 함수`를 쓰는 것이 이점이 더 많다.

### 5.8.4 익명 함수가 길면 문제가 될 수 있다

너무 많은 논리와 다른 익명 함수들을 중첩해서 가지고 있는 거대한 익명 함수는 오히려 독이다.

익명 함수가 두세 줄 이상으로 늘어나기 시작할 때, 여러 개의 `명명 함수`로 분리하면 코드의 가독성이 좋아진다.

> 👉🏻 하지만, 진짜 문제는 `이름 유무`가 아닌 `함수의 과도한 역할`일 수도 있다.

### 5.8.5 해결책: 긴 익명 함수를 여러 개의 명명 함수로 나누라

한꺼번에 너무 많은 일을 하는 큰 함수를 분리하는 것은 코드의 가독성을 개선하기 위한 좋은 방법이다.

## 5.9 프로그래밍 언어의 새로운 기능을 적절히 사용하라

새로운 기능이 정말로 그 일에 적합한 도구인지 솔직하게 생각해봐야 한다.

### 5.9.1 새 기능은 코드를 개선할 수 있다

### 5.9.2 불분명한 기능은 혼동을 일으킬 수 있다

개선 사항이 적거나 다른 개발자가 그 기능에 익숙하지 않다면 차라리 사용하지 않는 것이 좋을 때도 있다.

### 5.9.3 작업에 가장 적합한 도구를 사용하라
